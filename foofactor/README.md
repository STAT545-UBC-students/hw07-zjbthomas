<!-- README.md is generated from README.Rmd. Please edit that file -->
Notes
=====

-   This package is originally created by @jennybe, please check
    [here](https://github.com/jennybc/foofactors) for the original
    GitHub repository.
-   This is a toy package created for expository purposes. It is not
    meant to actually be useful. If you want a package for factor
    handling, please see
    [forcats](https://cran.r-project.org/package=forcats).

foofactors
==========

Factors are a very useful type of variable in R, but they can also drive
you nuts. This package provides some helper functions for the care and
feeding of factors.

Repository structure
--------------------

-   R scripts for functions are under [“R”](./R)
-   Test scripts are under [“tests”](./tests)
-   HTML generated by vignettes is
    [“hello-foofactors.html”](./doc/hello-foofactors.html)

Installation
------------

``` r
devtools::install_github("STAT545-UBC-students/hw07-zjbthomas/foofactor")
```

Quick demo
----------

### Load library

``` r
library(foofactors)
```

### `fbind()`

Binding two factors via `fbind()`:

``` r
# create two factors to combine
a <- factor(c("character", "hits", "your", "eyeballs"))
b <- factor(c("but", "integer", "where it", "counts"))
```

Simply catenating two factors leads to a result that most don’t expect.

``` r
# wrong example to combine two factors
c(a, b)
#> [1] 1 3 4 2 1 3 4 2
```

The `fbind()` function glues two factors together and returns factor.

``` r
# correct example to combine two factors with fbind()
fbind(a, b)
#> [1] character hits      your      eyeballs  but       integer   where it 
#> [8] counts   
#> Levels: but character counts eyeballs hits integer where it your
```

Often we want a table of frequencies for the levels of a factor. The
base `table()` function returns an object of class `table`, which can be
inconvenient for downstream work. Processing with `as.data.frame()` can
be helpful but it’s a bit clunky.

``` r
# complicted way to get frequencies of each levels
set.seed(1234)
x <- factor(sample(letters[1:5], size = 100, replace = TRUE))
table(x)
#> x
#>  a  b  c  d  e 
#> 25 26 17 17 15
as.data.frame(table(x))
#>   x Freq
#> 1 a   25
#> 2 b   26
#> 3 c   17
#> 4 d   17
#> 5 e   15
```

### `freq_out()`

The `freq_out()` function returns a frequency table as a well-named
`tbl_df`:

``` r
# simply use freq_out() to get frequencies of each levels
freq_out(x)
#> # A tibble: 5 x 2
#>   x         n
#>   <fct> <int>
#> 1 a        25
#> 2 b        26
#> 3 c        17
#> 4 d        17
#> 5 e        15
```

### `fdetect()`

The `fdetect()` function checks if a factor can be considered as a
character or not, based onn the fact that a character should have a
length equals to its unique values, while a factor should not.

``` r
# create a true factor and a character factor
true_factor <- factor(c("s", "t", "a", "t"))
character_factor <- factor(c("s", "t", "a"))
                      
# return TRUE if it is a true factor
fdetect(true_factor)
#> [1] TRUE

# return FALSE if it is a character factor
fdetect(character_factor)
#> [1] FALSE
```

### `freorder()`

The `freorder()` function can reorder the levels of a factor in
descending order.

``` r
# create a factor as an example
f <- factor(c("s", "t", "a"))

# the originally order of level should be "a" "s" "t"
levels(f)
#> [1] "a" "s" "t"

# the reordered levels should be "t" "s" "a"
levels(freorder(f))
#> [1] "t" "s" "a"
```

### `fset()`

The `fset()` function sets the levels of a factor by the order of
apperance of its data.

``` r
# create a factor as an example
f <- factor(c("s", "t", "a"))

# the originally order of level should be "a" "s" "t"
levels(f)
#> [1] "a" "s" "t"

# the reset levels should be "s" "t" "a"
levels(fset(f))
#> [1] "s" "t" "a"
```

### `dfwrite()`/`dfread()`

Functions `dfwrite()` and `dfread()` only work on data frame.
`dfwrite()` saves data frame as plain text delimited files (CSV files)
while retaining factor levels. Notice that:

-   `dfwrite()` will generate a companion file, so both of these two
    functions require two generated files to work.
-   Only columns of factor type in the resultant data frames can be
    reconstructed. For other columns, they may not be the same as the
    original ones because plain text delimited files drop many
    information.

In the following examples, the generated files are under
[“examples”](./examples)

``` r
# create a data frame as example
df <- data.frame(
    x = 1,
    y = 1:10,
    fac = sample(LETTERS[1:3], 10, replace = TRUE)
  )

# show the original levels of fac
levels(df$fac)
#> [1] "A" "B"

# reorder the levels of fac
df$fac <- freorder(df$fac)
levels(df$fac)
#> [1] "B" "A"

# write and read
dfwrite(df, "./examples/df.csv", "./examples/df_levels.txt")
read_df <- dfread("./examples/df.csv", "./examples/df_levels.txt")
# confirm levels are maintained
levels(read_df$fac)
#> [1] "B" "A"
```

If no path is specified to store levels, a “levels.txt” file will be
generated automatically under the same folder as the CSV file for data
frame.

``` r
# write and read
dfwrite(df, "./examples/df.csv")
read_df <- dfread("./examples/df.csv", "./examples/levels.txt")
# confirm levels are maintained
levels(read_df$fac)
#> [1] "B" "A"
```

References
----------

-   [Be the boss of your
    factors](https://www.stat.ubc.ca/~jenny/STAT545A/block08_bossYourFactors.html)
